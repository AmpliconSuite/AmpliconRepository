{% extends 'base.html' %}

{% load crispy_forms_tags%}

<head>
    <title>
        Create Project
    </title>




</head>
{% block main %}

    <script>
        function showWaitCursor() {
            document.body.style.cursor = 'wait';
            // force it on the button that is being clicked
            checkinputfield();
            $(".btn").css("cursor", "wait");
            return false
        }

        function checkinputfield(){
            if( document.getElementById("fileuploadfield").files.length == 0 ){
                console.log("no files selected");
                document.getElementById("upload_failed").style.display = "flex";
                return false
            } else{
                console.log(document.getElementById("fileuploadfield").files);
                console.log("file is uploaded");
                return true
            }
        }
    </script>
<h1>Create New Project</h1>
    <p>For files larger than 250Mb, please consider uploading with the AmpliconSuiteAggregator tool. It can be accessed via the <a href="https://genepattern.ucsd.edu/">GenePattern</a> interface, or by running the <a href="https://github.com/AmpliconSuite/AmpliconSuiteAggregator">command-line version</a> of the Aggregator.</p>

<div class="alert alert-danger alert-dismissible" role="alert" id="upload_failed" style="display:none; flex;">
    No File Selected, Please select a file using the "Choose File" button at the bottom of the form and try again.
</div>


{% if user.is_authenticated %}
<form method="post" enctype="multipart/form-data" onsubmit="return checkinputfield();">
    {% csrf_token %}
    {{ run|crispy }}

    <input type="file" name="document" id="fileuploadfield">
    
    <button class="btn btn-primary">Create Project</button>
</form>


{% else %}
<p>Sign in to Upload Files</p>
{% endif %}

{% endblock %}
