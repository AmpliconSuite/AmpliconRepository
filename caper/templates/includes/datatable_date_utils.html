
  
// Custom sort for "Month DD, YYYY at HH:MM:SS AM/PM TZ"
jQuery.extend(jQuery.fn.dataTable.ext.type.order, {
    'custom-date-pre': function (d) {
        // Remove "at" and timezone for parsing
        var cleaned = d.replace(/ at /, ' ').replace(/ [A-Z]{2,4}$/, '');
        var parsed = Date.parse(cleaned);
        return isNaN(parsed) ? 0 : parsed;
    }
});
  
  // Function to format the date string
    function formatDate(dateString) {
        // Parse the date string into a Date object (assuming it's in UTC)
        const utcDate = new Date(dateString);
        //Convert the UTC date to the local timezone
        const localDate = new Date(utcDate.getTime() - utcDate.getTimezoneOffset() * 60000);
        {#const localDate = utcDate#}
        // Format the local date using the desired format
        const formattedDate = localDate.toLocaleString('en-US', {
            month: 'long',
            day: '2-digit',
            year: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            second: '2-digit',
            hour12: true,
            timeZoneName: 'short'
        });
        return formattedDate;
    }

    // Function to format all date elements in the table
    function formatDates() {
        const dateElements = document.querySelectorAll('.date');
        dateElements.forEach(element => {
            const originalDate = element.textContent.trim();
            const formattedDate = formatDate(originalDate);
            element.textContent = formattedDate;
        });
    }
